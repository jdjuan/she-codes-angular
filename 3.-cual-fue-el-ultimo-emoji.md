# 4. ¬øCu√°l fue el emoji? üëë

## üí° Introducci√≥n üí°  <a id="1-introduccion"></a>

Construiremos un juego de memoria.   
Tendremos:   
Un bot√≥n que inicie el juego, un contandor de segundos que nos dira cuanto tiempo hemos llevamos jugando, e inmediatamente se nos presentara un emoji que vamos a memorizar, paso siguiente, aparecer√° una serie de emojis en pantalla, y t√∫ tendr√°s que responder si es el emoji que tenias que recordar o no, ademas, celebraremos cuando identifiques exitosamente el emoji, ¬°¬°con una linda imagen de un gatito üòªüòª!!.

¬øEst√°s lista?

¬°**Claro que si! ¬°Ya tienes experiencia! üí™**

[**¬°Aqu√≠ puedes encontrar el demo!**](https://angular-last-emoji.stackblitz.io/)**‚Äã**

## Paso 1: Crear vista del tablero de juego **üéÆ**  <a id="paso-1-crear-el-titulo"></a>

Vamos a crear el entorno donde vamos a jugar. Para ello iremos al archivo **app.component.html** y borramos todo el contenido y vamos a colocar lo siguiente:

{% code-tabs %}
{% code-tabs-item title="app.component.html" %}
```markup
<div class="scoreScreen">
	<label>
    Score:
  </label>
  <label>
    {{scoreGame || 0}}
  </label>
	<label>
    / Timer:
  </label>
  <label>
    {{0}}s
  </label>
</div>

<div class="fatherScreen">
  <div class="childScreen" *ngIf='showBtnStart'>
    <button (click)="startGame()">Iniciar Juego</button>
  </div>
</div>
```
{% endcode-tabs-item %}
{% endcode-tabs %}

**Deber√≠as ver algo as√≠: üëá**

![](.gitbook/assets/board-no-styles.png)

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** La etiqueta **Div** nos ayuda a definir un orden.  
  
**2.** La etiqueta **label**  es usualmente usada para contener texto.  
  
**3.** El elemento **{{}}**  es una forma de comunicar nuestro [componente](https://platzi.com/tutoriales/1153-angular/1619-que-son-los-componentes-en-angular/), de esta manera el **app.component.ts**, se comunica con **app.component.html,** y ****el **\|\|** dentro ****del ****elemento es una condici√≥n "o" que nos va a mostrar el n√∫mero cero mientras no exista datos en las variables.  
  
**4.** El elemento [**class**](https://css-tricks.com/almanac/selectors/c/class/)**=""**, nos va a ayudar a definir los estilos de nuestra aplicaci√≥n \(no solo tiene esa utilidad, pero la usaremos para eso en el ejercicio de hoy\).  
  
 **5.** El elemento **\***[**ngIf**](https://angular.io/api/common/NgIf)**=**, nos va a ayudar a ocultar o mostrar elementos, depende de la variable que tengamos asignada dentro del **\*ngIf=**, en este caso tenemos la variable **showBtnStart** donde la asignaremos en el **app.component.ts** mas adelante.   
  
**6.** El elemento **button** nos va a crear un bot√≥n que ser√° el que usaremos para iniciar nuestro juego.  
  
**7.** El elemento **\(click\)=""** controla el evento clic, cuando el usuario de clic a el bot√≥n, se va a llamar la funci√≥n **startGame\(\)** donde la asignaremos en el **app.component.ts** mas adelante.
{% endhint %}

## Paso 2: Adicionar l√≥gica a tablero de juego üî≠ <a id="paso-1-crear-el-titulo"></a>

Ahora vamos a modificar el archivo **app.component.ts**, ****en ****este ****archivo vamos a adicionar la declaraci√≥n de variables que vimos en el archivo **app.component.html**, y adem√°s vamos a agregar unas funciones.  
En este archivo, vamos a encontrar el siguiente c√≥digo:

![En la linea 10 adicionaremos la declaraci&#xF3;n de variables del siguiente bloque de c&#xF3;digo.](.gitbook/assets/set-logic.png)

{% code-tabs %}
{% code-tabs-item title="app.component.ts" %}
```typescript
  scoreGame = '';
  showBtnStart = true;

// Tambi√©n vamos a incluir funciones
  startGame() {
    this.randomEmoji();
  }
  randomEmoji() {
  }

```
{% endcode-tabs-item %}
{% endcode-tabs %}

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** A la variable **scoreGame** se asigna vac√≠o, de esta manera le estamos diciendo que es [tipo](https://www.uno-de-piera.com/tipos-en-typescript/) **String**.  
  
**2.** A la variable **showBtnStart** se asigna **true**, de esta manera le estamos diciendo que es [tipo](https://www.uno-de-piera.com/tipos-en-typescript/) **Boolean.**  
Adem√°s, cuando le asignamos **true**, en nuestro \***ngIf** de **app.component.html** deber√° mostrar todas las lineas de c√≥digo que contenga este.

**3.** Creamos una funci√≥n llamada **startGame\(\)**, en esta funci√≥n adicionaremos la l√≥gica que se deber√° ejecutar, cuando el usuario le da clic al bot√≥n "Iniciar Juego".

**4.** La funci√≥n **startGame\(\)** llamara ****a ****su ****vez **randomEmoji\(\),** que ****analizaremos ****en ****el ****paso **5**, por eso, la creamos, pero la dejamos sin l√≥gica.
{% endhint %}

## Paso **3**: Agregar estilos al tablero de juego üé®üñå

¬°Vamos a hacer que nuestro tablero tenga color! agregando un poco de CSS, ¬ørecuerdas las clases que usamos en nuestro **app.component.html**?, ¬°llego el tiempo de usarlas!. Reemplaza el contenido de **app.component.css** con este:

{% code-tabs %}
{% code-tabs-item title="app.component.css" %}
```css
button {  /* Afecta todas las etiquetas HTML button */
  background-color: seashell; /* Determina el color de fondo de nuestro bot√≥n */
  border: none; /* Nos elimina el borde a nuestro bot√≥n */
  border-radius: 12px; /* Hace los extremos de nuestro bot√≥n redondeados */
  padding: 16px;  /* Crea un espacio entre el borde de nuestro bot√≥n y el centro del bot√≥n */
  font-size: 20px; /* Determina el tama√±o de letra dentro de nuestro b√≥ton */
  font-weight: bold; /* Hace que nuestro texto se vea en Negrita */
  margin-right: 10px /* Crea un espacio entre el borde de nuestro bot√≥n y el exterior del mismo */
}

button:hover { /* Afecta todas las etiquetas HTML button en el momento que el cursor este sobre el */
  background: salmon; /* Determina el color de fondo de nuestro bot√≥n */
  border-style: solid; /* Nos crea un borde a nuestro bot√≥n de linea continuia */
  border-color: pink; /* Nos da un color a el borde de nuestro bot√≥n */
}

label { /* Afecta todas las etiquetas HTML label */
  white-space: nowrap; /* hace que nuestro texto no se quiebre, y se vea en una sola l√≠nea */
}
.childScreen { /* El . hace referencia a una clase, as√≠ que va a afectar todos los elementos HTML con esta clase */
  width: 120px; /* Determina el ancho de la secci√≥n */
}

.fatherScreen { /* El . hace referencia a una clase, as√≠ que va a afectar todos los elementos HTML con esta clase */
  height: 350px; /* Determina la altura de la secci√≥n */
  display: grid;  /* Define el elemento como un contenedor de cuadr√≠cula */
  justify-content: center; /* Centra los elementos horizontalmente */
  align-items: center; /* Centra los elementos verticalmente */
  background: #e9dbf1; /* Determina el color de fondo de la secci√≥n */
  border-radius: 15px; /* Hace los extremos de nuestra secci√≥n redondeados */
}

.scoreScreen { /* El . hace referencia a una clase, as√≠ que va a afectar todos los elementos HTML con esta clase */
  background: #e9dbf1;  /* Determina el color de fondo de la secci√≥n */
  border-radius: 15px; /* Hace los extremos de la secci√≥n redondeados */
  box-sizing: content-box; /* controla c√≥mo se maneja el elemento al que se aplica.
Los valores de ancho y alto se aplican al contenido, el relleno y el borde. */
  padding: 20px; /* Crea un espacio entre el borde de la secci√≥n y el centro la secci√≥n */
  margin-bottom: 8px; /* Crea un espacio entre el borde de la secci√≥n y el exterior de la misma */
  font-weight: bold; /* Hace que nuestro texto se vea en Negrita */
  font-size: 30px; /* Determina el tama√±o de letra dentro de la secci√≥n */
}
```
{% endcode-tabs-item %}
{% endcode-tabs %}

¬øLuce como mucho verdad?  
Pero en cada una de las l√≠neas puedes encontrar la explicaci√≥n sobre ¬øqu√© es? o ¬øqu√© hace?. Si quieres profundizar tus conocimientos en CSS, aqu√≠ te dejo una Wiki con gran cantidad de definiciones y art√≠culos. ü§ì[https://css-tricks.com/](https://css-tricks.com/).

**Deber√≠as ver algo as√≠: üëá**

![](.gitbook/assets/color-table.png)

## Paso 4: Crear elementos para emoji **üöß**

Llego el momento de mostrar un emoji en pantalla, este emoji nos definir√° ¬°todo el juego!, con este compararemos los dem√°s emojis que saldr√°n aleatoriamente, y ¬°no solo eso! pondremos un contador desendent√© de 5s, tiempo en el que nos memorizaremos este.  
Actualmente nuestro **app.component.html** tiene el siguiente c√≥digo:

![En la linea 20 adicionaremos la lo siguiente:](.gitbook/assets/add-emoji-principal.png)

{% code-tabs %}
{% code-tabs-item title="app.component.html" %}
```markup
  <div class="childScreen" *ngIf='countDownEmoji > -1 && !showBtnStart'>
    <label class='emoji'>
      {{emojiArray[emojiIndex]}}
    </label>
    <br />
    <label>
      Tendras {{countDownEmoji}}s para recordar este emoji
    </label>
  </div>
```
{% endcode-tabs-item %}
{% endcode-tabs %}

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** Utilizando la linea \***ngIf**='**countDownEmoji** &gt; -1 && !**showBtnStart**', estamos diciendo lo siguiente **‚û§** Deber√° mostrar las lineas de c√≥digo que contiene, solo si la variable **countDownEmoji** es ****mayor ****a ****-1, y si la variable **showBtnStart** contiene su valor en **false.**

**2.** Vamos a crear un array de emojis y almacenarlos en **emojiArray**, ****y ****seg√∫n el valor de la variable **emojiIndex**, ser√° el emoji que lograremos visualizar en pantalla para memorizar.

**3.** Tendremos una variable **countDownEmoji**, esta ser√° la encargada de permitirnos visualizar en pantalla, los segundos que van decrementando.
{% endhint %}

## Paso 5: Generaci√≥n del emoji que debemos recordar ‚è≤

Ahora si, vamos a hacer la l√≥gica para que nuestro emoji aparezca y se oculte a los 5s.  
Vamos a tomar nuestro archivo **app.component.ts**, actualmente luce as√≠, pero adicionaremos lo siguiente:

![](.gitbook/assets/add-generation-orincipal.png)

En la l√≠nea 12, m√°s declaraciones de variables, en la linea 15 se asigna valor a la variable que controla si el bot√≥n se muestra o no y en la l√≠nea 20, m√°s contenido de nuestras funciones.

{% code-tabs %}
{% code-tabs-item title="app.component.ts" %}
```typescript
  // adicionamos en la linea 12, declaraciones de variables
  countDownEmoji: number;
  emojiArray = ['üöó', 'üåå', 'üìª', 'üëª', 'üç¶', 'üëΩ', 'üëØ'];
  emojiIndex: number;
  maxNumberEmoji = this.emojiArray.length - 1;
  countDownEmojiSize = 5;

  // adicionamos en la linea 15
  this.showBtnStart = false;
  
  // adicionamos en la linea 20, las siguientes funciones
  randomEmoji() {
    this.emojiIndex = Math.round(Math.random() * this.maxNumberEmoji);
    this.startcountDownFirstEmoji();
  }

  startcountDownFirstEmoji() {
    const intervalEmoji = setInterval(() => this.intervalEmojiControl(intervalEmoji), 1000);
  }

  intervalEmojiControl(intervalEmoji) {
    this.countDownEmoji = this.countDownEmojiSize--;

    // Cuando termine el numero de segundos para recordar la imagen, se debe parar el setInterval
    if (this.countDownEmoji < 0) {
      clearInterval(intervalEmoji);
    }
  }

```
{% endcode-tabs-item %}
{% endcode-tabs %}

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** Declaramos la variable **countDownEmoji** como tipo number, haci√©ndolo as√≠, de tipo entero, ser√° la encargada de llevar la cuenta de nuestro contador cuando decrementa.  
  
**2.** Creamos la variable **emojiArray**, esta sera la encargada de contener nuestra lista de emojis posibles.

**3.** Declaramos la variable **emojiIndex** como tipo number, haci√©ndolo as√≠, de tipo entero, depende del n√∫mero que tenga, ser√° ser√° la posici√≥n en el array de **emojiArray** y a su vez el emoji que podremos ver.

**4.** Creamos la variable **maxNumberEmoji** y le asignamos el valor del tama√±o de nuestro **emojiArray** menos 1, esto es, porque vamos a generar un n√∫mero random, para que sea diferente cada vez y nuestro array inicia en 0, as√≠ que si tenemos un array de 7 posiciones, el valor m√°ximo que podr√≠amos seleccionar seria 6.

**5.** Creamos la variable **countDownEmojiSize**, esta variable nos ayudara a definir, cuantos segundos vamos a esperar, para memorizarnos el emoji.  


**6.** Asignamos a la variable **showBtnStart** el valor false, para que desaparezca de la pantalla, y permita la visualizaci√≥n del emoji que debemos memorizar.

**7.** En la funci√≥n **randomEmoji\(\)**, generaremos un n√∫mero [random](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random), de 0 a 6 \(**emojiArray** tiene 7 posiciones\), y lo asignaremos a **emojiIndex**, y procedemos a llamar la funci√≥n que se encargara de llamarse cada segundo.

**8.** En la funci√≥n **startcountDownFirstEmoji\(\)**, nos encargaremos de llamar la funci√≥n que nos va a decrementar el contador, cada segundo con un [**setInterval**](https://css-tricks.com/snippets/javascript/intervals/).

**9.** Creamos la funci√≥n **intervalEmojiControl\(\)**, recibe como par√°metro una variable llamada **intervalEmoji**, que almacena todo el **setInterval**, esto nos ayudar√° a detenerlo cuando la variable **countDownEmoji** sea menor a 0, con la funci√≥n [**clearInterval**](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval).
{% endhint %}

